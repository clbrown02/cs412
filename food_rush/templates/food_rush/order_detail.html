<!-- food_rush/templates/food_rush/order_detail.html
 page that displays the order  -->

{% extends 'food_rush/base.html' %}
{% load tz %}
{% load static %}

{% block content %}
  <h2>Order #{{ order.pk }}</h2>

  <p>
    <strong>Placed:</strong>
    {{ order.order_date|localtime|date:"Y-m-d H:i" }}
  </p>

  <p>
    <strong>Status:</strong>
    {{ order.get_status_display }}   {# "Confirmed" #}
  </p>

  <p>
    <strong>ETA:</strong>
    {{ order.eta|localtime|date:"H:i" }}

    {# Optional live countdown â€“ include ONLY if you want it #}
    {% if order.seconds_remaining %}
      &nbsp;(<span id="count" data-secs="{{ order.seconds_remaining }}"></span>)
    {% endif %}
  </p>

  <hr>

  <h3>{{ order.restaurant.name }}</h3>
  <p>{{ order.restaurant.address }}</p>

  <table>
    <thead>
      <tr><th>Item</th><th>Qty</th><th>Unit&nbsp;($)</th><th>Subtotal&nbsp;($)</th></tr>
    </thead>
    <tbody>
      {% for sel in order.selections.all %}
        <tr>
          <td>{{ sel.item.name }}</td>
          <td>{{ sel.quantity }}</td>
          <td>{{ sel.price_at_order }}</td>
          <td>{{ sel.line_total }}</td>
        </tr>
        
      {% endfor %}
      <tr><td colspan="3" style="text-align:right"><strong>Total:</strong></td>
          <td><strong>{{ total }}</strong></td>
      </tr>
    </tbody>
  </table>

  <a href="{% url 'show_restaurants' %}">Back to restaurants</a>
{% endblock %}


